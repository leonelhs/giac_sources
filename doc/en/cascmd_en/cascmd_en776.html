<!DOCTYPE html>
<html >
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="hevea 2.34">
<link rel="stylesheet" type="text/css" href="cascmd_en.css">
<title>Handling errors</title>
</head>
<body >
<a href="cascmd_en775.html"><img src="previous_motif.svg" alt="Previous"></a>
<a href="index.html"><img src="contents_motif.svg" alt="Up"></a>
<a href="cascmd_en777.html"><img src="next_motif.svg" alt="Next"></a>
<hr>
<h3 id="sec1971" class="subsection">23.4.1  Handling errors</h3>
<p>Some commands produce errors, and if your program tries to run such a
command it will halt with an error. 
The <span style="font-family:monospace"><span style="font-weight:bold"><span style="color:#0000CC">try</span></span></span><a id="hevea_default1582"></a> and
<span style="font-family:monospace"><span style="font-weight:bold"><span style="color:#0000CC">catch</span></span></span><a id="hevea_default1583"></a>
commands can help you to avoid halting the program;
put potentially problematic statements in a block
following <span style="font-family:monospace"><span style="font-weight:bold"><span style="color:#0000CC">try</span></span></span>, and immediately after the block put
<span style="font-family:monospace"><span style="font-weight:bold"><span style="color:#0000CC">catch</span></span></span> with an argument of an unused symbol, and follow that
with a block of statements that can handle the error.
</p><div class="center">
<span style="font-family:monospace"><span style="font-weight:bold"><span style="color:#0000CC">try</span></span></span> <span style="font-style:italic">tryblock</span> <span style="font-family:monospace"><span style="font-weight:bold"><span style="color:#0000CC">catch</span></span></span> (<span style="font-style:italic">symbol</span>) <span style="font-style:italic">catchblock</span>
</div><p>
If <span style="font-style:italic">tryblock</span> does not produce an error,
then the code
</p><div class="center">
<span style="font-family:monospace"><span style="font-weight:bold"><span style="color:#0000CC">catch</span></span></span> (<span style="font-style:italic">symbol</span>) <span style="font-style:italic">catchblock</span>
</div><p>
is not reached. Otherwise,
if <span style="font-style:italic">tryblock</span> does produce an error, then a
string describing the error is assigned to <span style="font-style:italic">symbol</span>,
and <span style="font-style:italic">catchblock</span> is evaluated.</p><h4 id="sec1972" class="subsubsection">Examples</h4>
<p>
The command below produces an error:

</p><table class="lstframe" style="padding:1ex;border-style:none;"><tr><td class="lstlisting"><span style="font-weight:bold"><span style="color:#BF0000"> </span></span><span style="font-weight:bold"><span style="color:#BF0000">[[1,1]]*[[2,2]]</span></span></td></tr>
</table><table class="display dcenter"><tr style="vertical-align:middle"><td class="dcell">
     

</td><td class="dcell"><table style="border-spacing:6px;border-collapse:separate;" class="cellpading0"><tr><td style="text-align:right;white-space:nowrap" ><span style="color:#0000CC">
</span><span style="color:#0000CC">Error: Invalid dimension</span><span style="color:#0000CC">
</span></td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td></tr>
</table></td></tr>
</table><p>
However, the following command does not produce an error:

</p><table class="lstframe" style="padding:1ex;border-style:none;"><tr><td class="lstlisting"><span style="font-weight:bold"><span style="color:#BF0000"> </span></span><span style="font-weight:bold"><span style="color:#0000CC">try</span></span><span style="font-weight:bold"><span style="color:#BF0000"> { [[1,1]]*[[2,2]] } </span></span><span style="font-weight:bold"><span style="color:#0000CC">catch</span></span><span style="font-weight:bold"><span style="color:#BF0000"> (</span></span><span style="font-weight:bold"><span style="color:#BF0000">err</span></span><span style="font-weight:bold"><span style="color:#BF0000">) { </span></span><span style="font-weight:bold"><span style="color:#BF0000">print</span></span><span style="font-weight:bold"><span style="color:#BF0000">(</span></span><span style="font-weight:bold"><span style="color:#006600"><span style="font-weight:bold"><span style="color:#BF0000">"The error is --- "</span></span></span></span><span style="font-weight:bold"><span style="color:#BF0000">+</span></span><span style="font-weight:bold"><span style="color:#BF0000">err</span></span><span style="font-weight:bold"><span style="color:#BF0000">) }</span></span></td></tr>
</table><p><span style="font-family:sans-serif"><span style="font-size:small"><span style="color:#006600">
The error is — Error: Invalid dimension
</span></span></span></p><table class="display dcenter"><tr style="vertical-align:middle"><td class="dcell">
     

</td><td class="dcell"><table style="border-spacing:6px;border-collapse:separate;" class="cellpading0"><tr><td style="text-align:right;white-space:nowrap" ><span style="color:#0000CC">
1
</span></td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td></tr>
</table></td></tr>
</table><p>With the following program:

</p><table class="lstframe" style="padding:1ex;border-style:none;"><tr><td class="lstlisting"> test(x):={
   <span style="color:#0000CC"><span style="font-weight:bold">local</span></span> y,str,err;
   <span style="color:#0000CC"><span style="font-weight:bold">try</span></span> {
     y:=[[1,1]]*x;
     str:=<span style="color:#006600">"This produced a product."</span>;
   } <span style="color:#0000CC"><span style="font-weight:bold">catch</span></span> (err) {
     y:=x;
     str:=<span style="color:#006600">"This produced an error "</span>+err+<span style="color:#006600">" The input is returned."</span>;
   }
   print(str);
   <span style="color:#0000CC"><span style="font-weight:bold">return</span></span> y;
 }</td></tr>
</table><p>input:

</p><table class="lstframe" style="padding:1ex;border-style:none;"><tr><td class="lstlisting"><span style="font-weight:bold"><span style="color:#BF0000"> </span></span><span style="font-weight:bold"><span style="color:#BF0000">test</span></span><span style="font-weight:bold"><span style="color:#BF0000">([[2],[2]])</span></span></td></tr>
</table><table class="display dcenter"><tr style="vertical-align:middle"><td class="dcell">
     

</td><td class="dcell"><table style="border-spacing:6px;border-collapse:separate;" class="cellpading0"><tr><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >“This produced a product.”</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td></tr>
<tr><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" ><table class="display"><tr style="vertical-align:middle"><td class="dcell">⎡<br>
⎣</td><td class="dcell">4</td><td class="dcell">⎤<br>
⎦</td></tr>
</table></td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td></tr>
</table></td></tr>
</table><p>
with the text in the pane above the output line.

</p><table class="lstframe" style="padding:1ex;border-style:none;"><tr><td class="lstlisting"><span style="font-weight:bold"><span style="color:#BF0000"> </span></span><span style="font-weight:bold"><span style="color:#BF0000">test</span></span><span style="font-weight:bold"><span style="color:#BF0000">([[2,2]])</span></span></td></tr>
</table><table class="display dcenter"><tr style="vertical-align:middle"><td class="dcell">
     

</td><td class="dcell"><table style="border-spacing:6px;border-collapse:separate;" class="cellpading0"><tr><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >“This produced an error Error: Invalid dimension The input is returned.”</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td></tr>
<tr><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" ><table class="display"><tr style="vertical-align:middle"><td class="dcell">⎡<br>
⎣</td><td class="dcell">⎡<br>
⎣</td><td class="dcell">2,2</td><td class="dcell">⎤<br>
⎦</td><td class="dcell">⎤<br>
⎦</td></tr>
</table></td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td></tr>
</table></td></tr>
</table><p>
with the text in the pane above the output line.</p><p>You can catch this error in other programs. Consider the program:

</p><table class="lstframe" style="padding:1ex;border-style:none;"><tr><td class="lstlisting"> g(x):={
   <span style="color:#0000CC"><span style="font-weight:bold">try</span></span> {
     <span style="color:#0000CC"><span style="font-weight:bold">return</span></span> f(x);
   } <span style="color:#0000CC"><span style="font-weight:bold">catch</span></span> (err) {
     x:=0;
   }
   <span style="color:#0000CC"><span style="font-weight:bold">return</span></span> x;
 }</td></tr>
</table><p>then:

</p><table class="lstframe" style="padding:1ex;border-style:none;"><tr><td class="lstlisting"><span style="font-weight:bold"><span style="color:#BF0000"> </span></span><span style="font-weight:bold"><span style="color:#BF0000">g</span></span><span style="font-weight:bold"><span style="color:#BF0000">(12)</span></span></td></tr>
</table><table class="display dcenter"><tr style="vertical-align:middle"><td class="dcell">
     

</td><td class="dcell"><table style="border-spacing:6px;border-collapse:separate;" class="cellpading0"><tr><td style="text-align:right;white-space:nowrap" ><span style="color:#0000CC">
12
</span></td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td></tr>
</table></td></tr>
</table><p>
since 12 is an integer. With a non-integer input, <span style="font-family:monospace">f(x)</span> gives an error and so
<span style="font-family:monospace">g(x)</span> returns 0:

</p><table class="lstframe" style="padding:1ex;border-style:none;"><tr><td class="lstlisting"><span style="font-weight:bold"><span style="color:#BF0000"> </span></span><span style="font-weight:bold"><span style="color:#BF0000">g</span></span><span style="font-weight:bold"><span style="color:#BF0000">(1.2)</span></span></td></tr>
</table><table class="display dcenter"><tr style="vertical-align:middle"><td class="dcell">
     

</td><td class="dcell"><table style="border-spacing:6px;border-collapse:separate;" class="cellpading0"><tr><td style="text-align:right;white-space:nowrap" ><span style="color:#0000CC">
0
</span></td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td><td style="text-align:left;white-space:nowrap" >&nbsp;</td><td style="text-align:right;white-space:nowrap" >&nbsp;</td></tr>
</table></td></tr>
</table>
<hr>
<a href="cascmd_en775.html"><img src="previous_motif.svg" alt="Previous"></a>
<a href="index.html"><img src="contents_motif.svg" alt="Up"></a>
<a href="cascmd_en777.html"><img src="next_motif.svg" alt="Next"></a>
</body>
</html>
