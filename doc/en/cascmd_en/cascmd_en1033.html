<!DOCTYPE html>
<html >
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="hevea 2.29+5 of 2017-05-18">
<link rel="stylesheet" type="text/css" href="cascmd_en.css">
<title>Visualizing power spectra</title>
</head>
<body >
<a href="cascmd_en1032.html"><img src="previous_motif.gif" alt="Previous"></a>
<a href="index.html"><img src="contents_motif.gif" alt="Up"></a>
<a href="cascmd_en1034.html"><img src="next_motif.gif" alt="Next"></a>
<hr>
<h3 id="ssec:plotspectrum" class="subsection">27.2.13  Visualizing power spectra</h3>
<p>The <span style="font-family:monospace">plotspectrum</span><a id="hevea_default1957"></a>
command displays the power spectrum of an audio clip.
</p><ul class="itemize"><li class="li-itemize">
<span style="font-family:monospace">plotspectrum</span> takes one mandatory argument and a sequence of optional arguments:
<ul class="itemize"><li class="li-itemize">
<span style="font-style:italic">A</span>, an audio clip.
</li><li class="li-itemize">Optionally, <span style="font-style:italic">opts</span>, a sequence of options each of which is one of:
<ul class="itemize"><li class="li-itemize">
<span style="font-style:italic">span</span>, which is either a list
<span style="font-family:monospace">[</span><span style="font-style:italic">fmin</span>,<span style="font-style:italic">fmax</span><span style="font-family:monospace">]</span> or
<span style="font-family:monospace">frequencies=</span><span style="font-style:italic">fmin</span><span style="font-family:monospace">..</span><span style="font-style:italic">fmax</span>, specifying the
frequency band in Hertz (by default, <span style="font-style:italic">fmin</span>=0 and
<span style="font-style:italic">fmax</span>=<span style="font-family:monospace">samplerate(</span><span style="font-style:italic">A</span><span style="font-family:monospace">)</span>/2).
</li><li class="li-itemize"><span style="font-family:monospace">bins=</span><span style="font-style:italic">n</span>, where <span style="font-style:italic">n</span>&gt;2 is a positive integer which must be
a power of two and specifies the number of bins for the frequency range
[0,<span style="font-family:monospace">samplerate(</span><span style="font-style:italic">A</span><span style="font-family:monospace">)</span>/2] (by default, <span style="font-style:italic">n</span>=512).
</li><li class="li-itemize"><span style="font-family:monospace">color=</span><span style="font-style:italic">disp</span>, where <span style="font-style:italic">disp</span> is a sum of
plot attributes (e.g. an <span style="font-variant:small-caps">Xcas</span> color). By default, the spectrum is
drawn in blue.
</li></ul>
</li></ul>
</li><li class="li-itemize"><span style="font-family:monospace">plotspectrum(</span><span style="font-style:italic">A</span> ⟨,<span style="font-style:italic">opts</span> ⟩<span style="font-family:monospace">)</span>
displays the power spectrum of <span style="font-style:italic">A</span> in the frequency range [<span style="font-style:italic">fmin</span>,<span style="font-style:italic">fmax</span>].
</li><li class="li-itemize">If the audio clip has more than one channel, the channels are mixed down
into a single channel before computing the spectrum.
</li></ul><h4 id="sec2567" class="subsubsection">Examples</h4>
<p>
With the file <span style="font-family:monospace">flute-C5.wav</span> donwloaded from
<a href="https://www.ee.columbia.edu/~dpwe/sounds/instruments/">here</a>:

</p><table class="lstframe" style="padding:1ex;border-style:none;"><tr><td class="lstlisting"><span style="font-weight:bold"><span style="color:#BF0000"> </span></span><span style="font-weight:bold"><span style="color:#BF0000">flute</span></span><span style="font-weight:bold"><span style="color:#BF0000">:=</span></span><span style="font-weight:bold"><span style="color:#BF0000">readwav</span></span><span style="font-weight:bold"><span style="color:#BF0000">(</span></span><span style="font-weight:bold"><span style="color:#006600"><span style="font-weight:bold"><span style="color:#BF0000">"/home/luka/Downloads/flute-C5.wav"</span></span></span></span><span style="font-weight:bold"><span style="color:#BF0000">):;</span></span><span style="font-weight:bold"><span style="color:#BF0000">
 </span></span><span style="font-weight:bold"><span style="color:#BF0000">plotspectrum</span></span><span style="font-weight:bold"><span style="color:#BF0000">(</span></span><span style="font-weight:bold"><span style="color:#BF0000">flute</span></span><span style="font-weight:bold"><span style="color:#BF0000">)</span></span></td></tr>
</table><div class="center">

<img src="cascmd_en451.png">

</div><p>

The audio file <span style="font-family:monospace">flute-C5</span> consists of a single C5 tone played
by a flute. In the graph above, the fundamental of that tone is
clearly visible at the corresponding frequency of about 523 Hz.
You can also see its first overtone at about 1046 Hz
(the next two overtones are barely visible).</p><p>With the file <span style="font-family:monospace">gettysburg10.wav</span> downloaded from
<a href="https://www2.cs.uic.edu/~i101/SoundFiles/">here</a>:

</p><table class="lstframe" style="padding:1ex;border-style:none;"><tr><td class="lstlisting"><span style="font-weight:bold"><span style="color:#BF0000"> </span></span><span style="font-weight:bold"><span style="color:#BF0000">clip</span></span><span style="font-weight:bold"><span style="color:#BF0000">:=</span></span><span style="font-weight:bold"><span style="color:#BF0000">readwav</span></span><span style="font-weight:bold"><span style="color:#BF0000">(</span></span><span style="font-weight:bold"><span style="color:#006600"><span style="font-weight:bold"><span style="color:#BF0000">"/home/luka/Downloads/gettysburg10.wav"</span></span></span></span><span style="font-weight:bold"><span style="color:#BF0000">):;</span></span><span style="font-weight:bold"><span style="color:#BF0000">
 </span></span><span style="font-weight:bold"><span style="color:#BF0000">plotspectrum</span></span><span style="font-weight:bold"><span style="color:#BF0000">(</span></span><span style="font-weight:bold"><span style="color:#BF0000">clip</span></span><span style="font-weight:bold"><span style="color:#BF0000">,[0,2000],</span></span><span style="font-weight:bold"><span style="color:#BF0000">bins</span></span><span style="font-weight:bold"><span style="color:#BF0000">=4096,</span></span><span style="font-weight:bold"><span style="color:#BF0000">color</span></span><span style="font-weight:bold"><span style="color:#BF0000">=</span></span><span style="font-weight:bold"><span style="color:#BF0000">purple</span></span><span style="font-weight:bold"><span style="color:#BF0000">)</span></span></td></tr>
</table><div class="center">

<img src="cascmd_en452.png">

</div><p>

With the file <span style="font-family:monospace">sf1_n0H.wav</span> downloaded from
<a href="https://www.ee.columbia.edu/~dpwe/sounds/sents/">here</a>:

</p><table class="lstframe" style="padding:1ex;border-style:none;"><tr><td class="lstlisting"><span style="font-weight:bold"><span style="color:#BF0000"> </span></span><span style="font-weight:bold"><span style="color:#BF0000">clip</span></span><span style="font-weight:bold"><span style="color:#BF0000">:=</span></span><span style="font-weight:bold"><span style="color:#BF0000">readwav</span></span><span style="font-weight:bold"><span style="color:#BF0000">(</span></span><span style="font-weight:bold"><span style="color:#006600"><span style="font-weight:bold"><span style="color:#BF0000">"/home/luka/Downloads/sf1_n0H.wav"</span></span></span></span><span style="font-weight:bold"><span style="color:#BF0000">):;</span></span><span style="font-weight:bold"><span style="color:#BF0000">
 </span></span><span style="font-weight:bold"><span style="color:#BF0000">plotspectrum</span></span><span style="font-weight:bold"><span style="color:#BF0000">(</span></span><span style="font-weight:bold"><span style="color:#BF0000">clip</span></span><span style="font-weight:bold"><span style="color:#BF0000">,</span></span><span style="font-weight:bold"><span style="color:#BF0000">frequencies</span></span><span style="font-weight:bold"><span style="color:#BF0000">=0..5000,</span></span><span style="font-weight:bold"><span style="color:#BF0000">bins</span></span><span style="font-weight:bold"><span style="color:#BF0000">=1024)</span></span></td></tr>
</table><div class="center">

<img src="cascmd_en453.png">

</div><p>

In the above graph you can see the two components of the stationary noise
contained in ranges 0-440 Hz and 2500-3000 Hz. The rest of the spectrum
belongs to the female speaker. Use the <span style="font-family:monospace">playsnd</span> command to
hear the audio (see Section <a href="cascmd_en1034.html#ssec%3Aplaysnd">27.2.14</a>).</p>
<hr>
<a href="cascmd_en1032.html"><img src="previous_motif.gif" alt="Previous"></a>
<a href="index.html"><img src="contents_motif.gif" alt="Up"></a>
<a href="cascmd_en1034.html"><img src="next_motif.gif" alt="Next"></a>
</body>
</html>
