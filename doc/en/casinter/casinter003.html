<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
            "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<HEAD>

<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META name="GENERATOR" content="hevea 1.10">
<LINK rel="stylesheet" type="text/css" href="casinter.css">
<TITLE>Level types</TITLE>
</HEAD>
<BODY >
<A HREF="casinter002.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A>
<A HREF="index.html"><IMG SRC="contents_motif.gif" ALT="Up"></A>
<A HREF="casinter004.html"><IMG SRC="next_motif.gif" ALT="Next"></A>
<HR>
<H2 CLASS="section"><A NAME="htoc3">3</A>  Level types</H2><P>
Each session is a numbered collection of levels, each level 
has a type: commandline, comment, expression editor,
spreadsheet, program, 2-d or
3-d geometry, or logo-like turtle.</P><H3 CLASS="subsection"><A NAME="toc1"></A><A NAME="htoc4">3.1</A>  Commandline</H3><P>
If no commandline is available, you can get a new one by the 
<CODE>CAS-&gt;New entry</CODE>
menu. You may modify existing commandlines or write in a new
commandline. The following shortcuts are available
</P><UL CLASS="itemize"><LI CLASS="li-itemize">
Tab: show completions
</LI><LI CLASS="li-itemize">Enter: parse and evaluate the current commandline. You can
type Enter while the cursor is at any position. A new commandline
will be added if it was the last level of the session or if
the next level is not a commandline.
</LI><LI CLASS="li-itemize">shift-Enter: make a new line in the current commandline
</LI><LI CLASS="li-itemize">Ctrl-C: copy selection to clipboard
</LI><LI CLASS="li-itemize">Ctrl-V: paste clipboard
</LI><LI CLASS="li-itemize">Ctrl-X: cut and copy selection to clipboard
</LI><LI CLASS="li-itemize">Ctrl-U: erase commandline without copy in the clipboard
</LI><LI CLASS="li-itemize">Esc: erase commandline with copy in the clipboard
</LI><LI CLASS="li-itemize">Ctrl-Z: cancel last edit command
</LI><LI CLASS="li-itemize">up and down: move in the current commandline if it is a
multiline commandline
</LI><LI CLASS="li-itemize">PageUp and PageDown: move to the previous or next level
</LI><LI CLASS="li-itemize">Ctrl-Up and Ctrl-Down replace the selection with the previous
or next command that has been validated in a previous commandline
(history saving mechanism).
</LI></UL><P>
When you evaluate a commandline, a log output may be displayed
(written in blue over white by default), followed by the answer, which
might be an equation or a graphic (2-d or 3-d) widget if the
answer is a graphic object (for lists, the widget type corresponds
to the type of the last evaluated object).</P><P>If you do not want to see the answer displayed (for example if
you store a large matrix in a variable), just finish
your commandline by <CODE>:;</CODE></P><H3 CLASS="subsection"><A NAME="toc2"></A><A NAME="htoc5">3.2</A>  Comments</H3><P>
Comments are inserted using the <CODE>CAS-&gt;New comment</CODE> menu.
They are by default written in green instead of red over white.
Comments are not evaluated when pressing Enter (the effect is to
put the cursor to the next level).</P><H3 CLASS="subsection"><A NAME="toc3"></A><A NAME="htoc6">3.3</A>  Expression editor</H3><P> <A NAME="sec:eqw"></A>
Typing the shortcut <TT>Alt-e</TT> 
or using the menu <TT>Expression-&gt;New expression</TT> will
open an expression editor above the current level. The scientific
keyboard should automatically appear (press the <SPAN CLASS="textboxed">x</SPAN> button at the 
top right of the keyboard if you don&#X2019;t want it).</P><P>The expression editor lets you enter complex mathematical expression
in 2-d like on a paper. 
For example suppose we want to enter
</P><TABLE CLASS="display dcenter"><TR VALIGN="middle"><TD CLASS="dcell">&#X239B;<BR>
&#X239C;<BR>
&#X239C;<BR>
&#X239D;</TD><TD CLASS="dcell"><TABLE CLASS="display"><TR><TD CLASS="dcell" ALIGN="center"><I>x</I>+1</TD></TR>
<TR><TD CLASS="hbar"></TD></TR>
<TR><TD CLASS="dcell" ALIGN="center"><I>x</I>+2</TD></TR>
</TABLE></TD><TD CLASS="dcell">&#X239E;<BR>
&#X239F;<BR>
&#X239F;<BR>
&#X23A0;</TD><TD CLASS="dcell">· </TD><TD CLASS="dcell">&#X239B;<BR>
&#X239C;<BR>
&#X239C;<BR>
&#X239D;</TD><TD CLASS="dcell">3+</TD><TD CLASS="dcell"><TABLE CLASS="display"><TR><TD CLASS="dcell" ALIGN="center">4</TD></TR>
<TR><TD CLASS="hbar"></TD></TR>
<TR><TD CLASS="dcell" ALIGN="center"><I>x</I></TD></TR>
</TABLE></TD><TD CLASS="dcell"> </TD><TD CLASS="dcell">&#X239E;<BR>
&#X239F;<BR>
&#X239F;<BR>
&#X23A0;</TD><TD CLASS="dcell"><TABLE CLASS="display"><TR><TD CLASS="dcell" ALIGN="left">5</TD></TR>
<TR><TD CLASS="dcell" ALIGN="left"><BR>
<BR>
<BR>
</TD></TR>
<TR><TD CLASS="dcell" ALIGN="left">&nbsp;</TD></TR>
</TABLE></TD><TD CLASS="dcell"> </TD></TR>
</TABLE><P>
Open an expression editor (<TT>Alt-e</TT>) then type
</P><UL CLASS="itemize"><LI CLASS="li-itemize">
<I>x</I>+1  &#X2191;, this will select <I>x</I>+1
</LI><LI CLASS="li-itemize"><CODE>/</CODE> (for the division)
</LI><LI CLASS="li-itemize"><I>x</I>+2  &#X2191;  &#X2191;
</LI><LI CLASS="li-itemize">* 3 &#X2191; + 4 &#X2191; / x
</LI><LI CLASS="li-itemize">&#X2191;  &#X2191;  &#X2191; <CODE>^</CODE> 5
</LI></UL><P>
You can now move the selection in the tree of the expression
with the arrows keys :
</P><UL CLASS="itemize"><LI CLASS="li-itemize">
&#X2191; moves up one level in the tree, that is select the
function or operator with had the current selection as argument 
(it also selects the other arguments of the function/operator)
</LI><LI CLASS="li-itemize">&#X2193; moves down one level in the three, that is select
the first argument of the function/operator of the current selection
</LI><LI CLASS="li-itemize">&#X2190; or &#X2192; select the left or right brother 
of the current selection
</LI><LI CLASS="li-itemize">Ctrl-&#X2190; or Crtl-&#X2192; exchange the current selection
with it&#X2019;s left or right brother
</LI></UL><P>Another example, let&#X2019;s enter
</P><TABLE CLASS="display dcenter"><TR VALIGN="middle"><TD CLASS="dcell"><FONT SIZE=6>&#X222B;</FONT></TD><TD CLASS="dcell"><TABLE CLASS="display"><TR><TD CLASS="dcell" ALIGN="left">+&#X221E;</TD></TR>
<TR><TD CLASS="dcell" ALIGN="left"><BR>
<BR>
</TD></TR>
<TR><TD CLASS="dcell" ALIGN="left">0</TD></TR>
</TABLE></TD><TD CLASS="dcell"> </TD><TD CLASS="dcell"><TABLE CLASS="display"><TR><TD CLASS="dcell" ALIGN="center">1</TD></TR>
<TR><TD CLASS="hbar"></TD></TR>
<TR><TD CLASS="dcell" ALIGN="center">1+<I>x</I><SUP>2</SUP></TD></TR>
</TABLE></TD><TD CLASS="dcell"> </TD></TR>
</TABLE><P>
Type <TT>Alt-e</TT> to open a new expression editor
</P><UL CLASS="itemize"><LI CLASS="li-itemize">
the &#X222B; key on the scientific keyboard or <TT>Ctrl-S</TT> on
the keyboard, we now have an undefined integral
</LI><LI CLASS="li-itemize">the <CODE>,</CODE> key will switch to a defined integral (to do the
reverse operation, one would select each bound and press the backspace
key)
</LI><LI CLASS="li-itemize">&#X2193;, replace 0 by the function <CODE>1/(1+x^2)</CODE>
and &#X2191;
</LI><LI CLASS="li-itemize">&#X2190; to select the upper bound
</LI><LI CLASS="li-itemize">the &#X221E; key on the scientific keyboard to replace the 1
</LI><LI CLASS="li-itemize">the Enter key to evaluate the integral
</LI></UL><P>We know list the other special keys in the expression editor:
</P><UL CLASS="itemize"><LI CLASS="li-itemize">
<CODE>"</CODE>: 
Outside edition mode (no visible cursor), 
edit the selection like in a commandline, this is especially
useful if you want to edit a function name.
In edition mode, switch from considering the edit as a string
or as a normal edit. 
</LI><LI CLASS="li-itemize"><CODE>,</CODE>: if a sequence is selected, add a 0 to the end of the
sequence and select it. If the selection is not a sequence, creates
a sequence of size 2 with first element the selection, init the second
element to 0 and select it. You can move the newly created 0 in the
sequence with Ctrl-&#X2192; and Ctrl-&#X2190;.
</LI><LI CLASS="li-itemize"><CODE>(</CODE>: if a sequence is selected, make a user function
applied to this sequence, the name of the user function is initialized
to <CODE>f</CODE> and selected (type the function name to replace 
the <CODE>f</CODE> by your function name). If a vector is selected, it is replaced
by a sequence.
</LI><LI CLASS="li-itemize"><CODE>[</CODE>: if a sequence is selected, it is replaced by a vector,
if a vector is selected, an indexed vector/matrix position is created
where the variable name of the vector/matrix is initialized to
<CODE>m</CODE> and selected (type the matrix/list name to replace <CODE>m</CODE>)
</LI><LI CLASS="li-itemize">keys in combination with the Ctrl key
<UL CLASS="itemize"><LI CLASS="li-itemize">
Ctrl-A: select All
</LI><LI CLASS="li-itemize">Ctrl-C: Copy selection to clipboard (like under windows)
</LI><LI CLASS="li-itemize">Ctrl-V: Paste selection from clipboard
</LI><LI CLASS="li-itemize">Ctrl-T: translate selection to L<sup>A</sup>T<sub>E</sub>X and copy to clipboard
(the translation is also copied to the <CODE>Msg</CODE> output, click
on the <CODE>Msg</CODE> button to make it visible or not)
</LI><LI CLASS="li-itemize">Ctrl-E: eval selection
</LI><LI CLASS="li-itemize">Ctrl-F: factor selection
</LI><LI CLASS="li-itemize">Ctrl-N: apply normal on selection
</LI><LI CLASS="li-itemize">Ctrl-P: apply partfrac on selection
</LI><LI CLASS="li-itemize">Ctrl-I (or Tab key) completion key (position in index at the function
whose name begins the same)
</LI><LI CLASS="li-itemize">Ctrl-R: integral
</LI><LI CLASS="li-itemize">Ctrl-S: simplify
</LI><LI CLASS="li-itemize">Ctrl-L: limit
</LI><LI CLASS="li-itemize">Ctrl-D: derivative
</LI><LI CLASS="li-itemize">Ctrl-Z: undo
</LI><LI CLASS="li-itemize">Ctrl-Y: redo
</LI></UL>
</LI></UL><H3 CLASS="subsection"><A NAME="toc4"></A><A NAME="htoc7">3.4</A>  Programs</H3><P>
Programs may be written in a commandline if they are one or two
lines long, but for more complex programs, it is a good idea to
put them in a separate program level, using the
<CODE>Prg-&gt;New program</CODE> menu. This will open an editor in
a new level. Type your program (the <TT>Prg</TT> menu may help you
for the syntax of tests, loops, function definition, etc.), 
and press the <TT>OK</TT> button once completed. 
If parse is successfull, you can test your program
in any commandline.</P><P>The <CODE>Prg</CODE> menu has items to open or
import an existing (program) file inside the current text, save
or export the current program (independently from the worksheet). 
You can also use the menu 
to insert programming structures. There are buttons to find the
next occurence of a search string, to parse the current program
(errors are displayed in the messages area) and to save the
program (the current filename is displayed at the right of the
save button).</P><P>The keywords of the language are highlighted. In Xcas programming
mode, the tabulation key may be used for indentation (experimental
feature).</P><P>Tip: before pressing the <TT>OK</TT> button, check the programming
syntax by looking at the status area button
in the middle at the top of the session. If you need
to change the syntax, hit the status button and select the right syntax.</P><H3 CLASS="subsection"><A NAME="toc5"></A><A NAME="htoc8">3.5</A>  Geometry and graphics</H3><P>
A graphic output is made of a 2-d or 3-d scene with controls,
it corresponds to a unique commandline above it. 
You can create some examples easily using the <TT>Graph</TT> menu.</P><P>A geometry figure is the display of a 2-d or 3-d graphic scene 
representing the graphical objects of the commandlines 
that are on it&#X2019;s left:
</P><UL CLASS="itemize"><LI CLASS="li-itemize">
you may create some geometric objects using the mouse (points,
lines, triangles, circles, etc.),
</LI><LI CLASS="li-itemize">alternatively you can enter commandlines, with the help
of the Geo menu
</LI><LI CLASS="li-itemize">interactive geometry is implemented by moving points in pointer
mode or by moving special objects called parameters or cursors. 
</LI></UL><H4 CLASS="subsubsection"><A NAME="htoc9">3.5.1</A>  Common features</H4><P>
The controls are common to 2-d, 3-d graphics or geometry. You can
move left, right, up and down the window, redefine it using
coordinates, zoom in and out, pause and restart an animation using the
buttons and the <TT>M</TT> menu at the right of the graphic, or 
using the <TT>Graph</TT> menu.
In 2-d, the coordinates 
of the mouse are displayed while it is in the graphic area. 
You can modify the visualization
window with the mouse (drag will move, 
use the scroll button for centered zoom in/out, or select an area with
the right mouse button for an area zoom in).
In 3-d,
you can rotate the representation along the current x, y, z axis
with a mouse drag outside of the scene rendering, or
by hitting the x,X, y,Y and z,Z key (if the focus is in the 3-d scene).</P><P>Note that the controls apply only to the visualization, not to the creation
of graphic objects. For example, if you create a plot of a function,
the discretisation parameters for this plot (e.g. minimal value for
<I>x</I>) are fixed and will not change if you move the minimal visualisation
value using the controls. You must recreate a graphical object if
you did not choose correctly the parameters. For example if you
run the command <CODE>plot(sin(x))</CODE>, the minimal value for computation
of <I>x</I> will be the default value 
(Xmin from the Geo configuration, -10 by default). If
you move the minimal value of <I>x</I> for visualization below Xmin, you will
not see the plot there. To see the plot below Xmin, you would have
to specify something like <CODE>plot(sin(x),x=-20..0)</CODE> and validate
the commandline. This limitation does not apply to geometric objetcs
(point, segments, lines and circles) 
which will always be drawn if they are visible.</P><P>A <TT>M</TT> menu is available below the controls (it&#X2019;s items are also available
from the top <TT>Geo</TT> menu), 
it contains items to print
and control the screen. You can export a graph to encapsulated
postscript and to PNG (you must have the converting tools 
netpbm or ImageMagic
installed, this should be installed by the Xcas installer under Windows. If they
are not installed under Linux, run your software installer or 
open a Terminal
and type<BR>
<CODE>sudo apt-get install imagemagick</CODE><BR>
for Debian/Ubuntu distributions or<BR>
<CODE>sudo yum install imagemagick</CODE><BR>
for Fedora-compatible distributions).</P><P>Title and axis legends must be part of the command(s) that generate
the graph or geometry window. For example, try this on a commandline
</P><DIV CLASS="center">
<CODE>f(t):=sin(t);title="Graph of f on a period",</CODE>
<CODE>labels=["t","f(t)"],legend=["cm","m"],</CODE>
<CODE>plot(f(t),t=-pi..pi,legend="f")</CODE>
</DIV><H4 CLASS="subsubsection"><A NAME="htoc10">3.5.2</A>  2-d geometry</H4><P>
Use the <CODE>Geo-&gt;New figure-&gt;geo2d</CODE> menu to make a new 2-d geometry
session. This will open a new level with a &#X201C;subsession&#X201D; (group of
commandlines) at the left,
a 2-d screen in the middle, and the controls at the right. If there
are parameters, they will be below the controls at the right.
The subsession is a list of commandline levels. Evaluation of
a commandline level will automatically reevaluate all levels
below (i.e. with a higher level number), therefore if you use
one level to define an object and modify the definition of this
object later, all objects depending on this object will be modified.
Modification of a level defining a point or a 1-d parameter can be
done interactively with the mouse either in the geometric screen or in the
parameter area (below the controls).</P><P>The geometry level has a mode, which affects how the mouse behave.
</P><UL CLASS="itemize"><LI CLASS="li-itemize">
In all modes, right-clicking (or double-clicking) on an object
displays a dialog box so that you can easily modify the object
attributes (or delete the object).
</LI><LI CLASS="li-itemize">In 2-d frame mode, draging the mouse will move the visualization windows
and scrolling will zoom in/out.
</LI><LI CLASS="li-itemize">In pointer mode, you can move an existing point, push the mouse 
near the point (when the mouse is near enough, it will show
a different cursor) and move the mouse, release it at the
new postion.
</LI><LI CLASS="li-itemize">In point mode, the mouse can be used to define new
points or segments. To define a new
point, just click somewhere not near another point or segment. To
define a segment, push the mouse button at the beginning, move
the mouse, release the mouse at the end of the segment (if
you release the mouse out of the screen, the segment will be
cancelled). 
</LI><LI CLASS="li-itemize">You can draw a few more complex object with the mouse using
the other modes, like triangles, circles, bisectors, .... 
</LI><LI CLASS="li-itemize">You may also type Xcas commands (from the Geo menu)
in a commandline at the left of the graphic. Each command may evaluate
to a graphic object and be displayed or to a non graphical object which
may be used later in the construction.
</LI></UL><P>
To erase a geometrical object, right-click on it, select Delete
or select it&#X2019;s level in the
subsession at the left, and use the <CODE>Edit-&gt;Suppress levels</CODE>
menu or Backspace key.</P><P>For example, you can click three points with the mouse (in point mode),
this will create 3 levels with definitions for points A,B,C.
Then you can make the circle containing A, B, C either by selecting
the <CODE>Circles-&gt;circumcircle</CODE> mode and click on A,B,C
or by entering in a commandline the
<CODE>circumcircle</CODE> command (menu <CODE>Geo-&gt;Circles</CODE>)<BR>
<CODE>c:=circumcircle(A,B,C)</CODE></P><P><B>Remark: how to work with several figures in a tab</B><BR>
When you create objets in a figure with a mouse, 
the name of the created object is
automatically choosen. This name is shared between figures of the same
tab so that they don&#X2019;t interfer if you have several figures in the
same tab. If you want to copy a part of a figure in another figure,
enter in a level of the target figure
the instruction <TT>eval([ ],1)</TT> where you put inside the brackets
the names of the objects to be copied (e.g. <TT>eval([A,B,AB],1)</TT>
will copy A, B and AB from a previous figure to the new figure). 
If you change the initial figure (where A,
etc. were defined), you must reeval the instruction in the target figure
to reflect the changes (press Enter in the first level of the target figure).</P><H4 CLASS="subsubsection"><A NAME="htoc11">3.5.3</A>  Parameters (cursors)</H4><P>
Parameters or cursors are real values which can move in a fixed interval, e.g.
between -5 and +5. The real value may be changed by moving a cursor
with the mouse below the controls at the right of the geometrical
representation. There are two kinds of parameters: formal
and numeric parameters. Formal parameters have a formal name
which is used in all exact calculations, and a numeric value
which is used for all numeric evaluations (including graphical representation
of objects depending on the parameter). They can therefore be used
to make an analytical proof of a geometrical theorem using 
the CAS engine, while displaying
a figure. Numerical parameters evaluate always to their numerical value, 
they can
not be used to make an analytical proof (only to make conjectures 
like with most interactive geometry softwares).</P><P>To add a new parameter, use the <TT>Geo-&gt;Edit-&gt;Add parameter</TT> menu.
For example, add a level with <CODE>f(x):=a*x^2+b*x+c</CODE>
then define 3 parameters named a, b, c and add the command
<CODE>plot(f(x))</CODE>, then move one of them to see the 
influence of each parameter
on the shape of the parabola.
You could also add a level <CODE>mini:=solve(diff(f(x),x))</CODE> and
<CODE>M:=point(mini[0],f(mini[0]))</CODE> to display the minimum.
Note that the coordinates of M are displayed in terms of a and b
under the commandline defining M at the left. You would have to add a level with
<CODE>evalf(coordonnees(M))</CODE> to see the current numerical value.</P><H4 CLASS="subsubsection"><A NAME="htoc12">3.5.4</A>  3-d rendering.</H4><P>
There are several options for 3-d graphs rendering that may be
configured by hitting the cfg button. First, you have to choose
between intrinsic colors or a scene viewed with 1 to 8 light spots, 
see below.</P><P>Then you can choose the <I>x</I>, <I>y</I>, <I>z</I> ranged that will be visible.
The position of the eye visualizing the scene may be changed by
specifying a plan equation (normal to the vision direction). You
may also easily change the view point outside of
the cfg configuration window either with the
mouse (push outside of the parallelepipedium, drag the mouse
and release it at your option) or with the x,X, y,Y, z,Z keys to
rotate around the <I>x</I>, <I>y</I> or <I>z</I> axis. </P><P>By hitting the r key or by selecting 
<CODE>M-&gt;3-d-&gt;Animation rotation</CODE>,
you can get a visualization animation by rotation around the
origin. By default, it will rotate the viewpoint around the <I>z</I> axis
but this is configurable from the <CODE>cfg</CODE> button, you can configure
</P><UL CLASS="itemize"><LI CLASS="li-itemize">
<CODE>Anim</CODE>: what will be animated, viewpoint if bit8 is 1, 
spot number 7 to 0 if bit 7 to 0 are set to 1. For example, 255 will
move all spots leaving the viewpoint unchanged.
</LI><LI CLASS="li-itemize"><CODE>t</CODE>: interval between 2 redrawing
</LI><LI CLASS="li-itemize"><CODE>n</CODE>: number of steps for a round trip
</LI><LI CLASS="li-itemize"><CODE>x</CODE>, <CODE>y</CODE>, <CODE>z</CODE>: coordinates of the axis
</LI><LI CLASS="li-itemize"><CODE>d</CODE>: normally 0, may be non 0 if you want also to move the
number of image of a programmed animation
</LI></UL><P>
You can specify the axis of rotation in the commandline defining the
scene by 
</P><DIV CLASS="center">
<CODE>gl_rotation_axis=[x,y,z]</CODE> 
</DIV><P>
where <CODE>x,y,z</CODE>
are the coordinates of the axis of rotation.</P><P>Do not confuse visualization animation with programmed animation
obtained by instructions like <CODE>animate, animate3d, animation</CODE>.</P><H4 CLASS="subsubsection"><A NAME="htoc13">3.5.5</A>  3-d spots</H4><P>
If you enable <CODE>Lights</CODE> in the <CODE>cfg</CODE> configuration of a 3-d
graph, the scene will be rendered by the OpenGL lighting
algorithm. You can enable 1 to 8 spots of light, each is configurable
(buttons <CODE>l1</CODE> to <CODE>l8</CODE>). </P><P>Each spot has geometric properties: it may be a positional spot
if <I>w</I>=1 or a directional spot if <I>w</I>=0
</P><UL CLASS="itemize"><LI CLASS="li-itemize">
A positional spot (<I>w</I>=1) is
at position <I>x</I>,<I>y</I>,<I>z</I> and has a direction, defined by 
<CODE>x-&gt;, y-&gt;, z-&gt;</CODE>. Light coming from a positional spot may
be attenuated, the attenuation may depend on the distance between
the spot and the object (with a quadratic formula, 
<CODE>att0, att1, att2</CODE> in the spot configuration), and by the
cosine of the angle between the spot direction and the segment
spot-object to an exponent (<CODE>exp</CODE> in the spot configuration).
In addition, the spot may light only inside a cone of angle
configurable by the <CODE>cutoff</CODE> value (in degrees, use 180
for no cutoff or a value between 0 and 90). An additional attenuation
comes from the cosine of the angle incoming direction-normal to the
object, so that zenithal lighting is maximal.
</LI><LI CLASS="li-itemize">A directional spot <I>w</I>=0 (emulating e.g. Sun light), does not
attenuate (except for the angle between the direction of the
spot and the normal). The direction is defined by <I>x</I>,<I>y</I>,<I>z</I>.
</LI></UL><P>Objects from the scene may
have their own properties with respect to three kinds of light:
</P><UL CLASS="itemize"><LI CLASS="li-itemize">
ambient light,
emulating light coming from all directions and diffused
in all directions without attenuation, 
</LI><LI CLASS="li-itemize">diffuse light,
emulating light coming from one direction and diffused in all directions
with an attenuation factor proportionnal to the cosine of the
angle of the incoming direction and the normal to the object,
</LI><LI CLASS="li-itemize">specular light,
emulating light coming from one direction and reflected 
preferentially in the direction symmetric with respect to
the normal of the object.
</LI></UL><P>
In addition, an object may have intrinsic light, called emission.
Each property must be specified for 4 channels: r (red), b (blue)
and g (green) for the colors, and a (alpha) for transparency (if
you enable <CODE>Blending</CODE>).
Object properties must be specified in their definition (on 
the commandline):
</P><UL CLASS="itemize"><LI CLASS="li-itemize">
<CODE>gl_material=[gl_front,gl_ambient,[r,g,b,a]]</CODE><BR>
specifies the property for ambient light, use 
<CODE>gl_diffuse</CODE>, <CODE>gl_specular</CODE> or <CODE>gl_emission</CODE>
instead of <CODE>gl_ambient</CODE> for diffuse, specular or intrinsic
light. Default is 0.2 for ambient, 0.8 for diffuse and 0 for emission
on r,g,b channels and 1 on alpha channels.
</LI><LI CLASS="li-itemize"><CODE>gl_material=[gl_front,gl_shininess,n]</CODE><BR>
specifies the exponent <I>n</I> that will be used for specular light. The
exponent is that of cos(&#X3B8;), where &#X3B8; is the angle
between reflected incoming light and visualization direction (default
is <I>n</I>=50).
</LI><LI CLASS="li-itemize"><CODE>gl_texture="filename"</CODE> specify an image filename that
will be mapped on a sphere or a polygon or a parametric
defined surface.
</LI></UL><P>Summing up, the formula for light on each channel is :
</P><TABLE CLASS="display dcenter"><TR VALIGN="middle"><TD CLASS="dcell"><TABLE CELLSPACING=6 CELLPADDING=0><TR><TD ALIGN=right NOWRAP> <I>l</I></TD><TD ALIGN=center NOWRAP>=</TD><TD ALIGN=left NOWRAP><TABLE CLASS="display"><TR VALIGN="middle"><TD CLASS="dcell"><I>o</I><SUB><I>e</I></SUB>+ <I>o</I><SUB><I>a</I></SUB> </TD><TD CLASS="dcell"><TABLE CLASS="display"><TR><TD CLASS="dcell" ALIGN="center">8</TD></TR>
<TR><TD CLASS="dcell" ALIGN="center"><FONT SIZE=6>&#X2211;</FONT></TD></TR>
<TR><TD CLASS="dcell" ALIGN="center"><I>j</I>=1</TD></TR>
</TABLE></TD><TD CLASS="dcell"> <I>l</I><SUB><I>a</I>,<I>j</I></SUB> + <I>o</I><SUB><I>s</I></SUB> </TD><TD CLASS="dcell"><TABLE CLASS="display"><TR><TD CLASS="dcell" ALIGN="center">8</TD></TR>
<TR><TD CLASS="dcell" ALIGN="center"><FONT SIZE=6>&#X2211;</FONT></TD></TR>
<TR><TD CLASS="dcell" ALIGN="center"><I>j</I>=1</TD></TR>
</TABLE></TD><TD CLASS="dcell"> <I>l</I><SUB><I>s</I>,<I>j</I></SUB>
cos(&#X3B3;<SUB><I>j</I></SUB>)<SUP><I>S</I></SUP> + </TD></TR>
</TABLE></TD></TR>
<TR><TD ALIGN=right NOWRAP>&nbsp;</TD><TD ALIGN=center NOWRAP>&nbsp;</TD><TD ALIGN=left NOWRAP><TABLE CLASS="display"><TR VALIGN="middle"><TD CLASS="dcell">+  <I>o</I><SUB><I>d</I></SUB> </TD><TD CLASS="dcell"><TABLE CLASS="display"><TR><TD CLASS="dcell" ALIGN="center">8</TD></TR>
<TR><TD CLASS="dcell" ALIGN="center"><FONT SIZE=6>&#X2211;</FONT></TD></TR>
<TR><TD CLASS="dcell" ALIGN="center"><I>j</I>=1</TD></TR>
</TABLE></TD><TD CLASS="dcell"> <I>l</I><SUB><I>d</I>,<I>j</I></SUB> 
cos(&#X3B1;<SUB><I>j</I></SUB>)<SUP><I>e</I><SUB><I>j</I></SUB></SUP> cos(&#X3B2;<SUB><I>j</I></SUB>) </TD><TD CLASS="dcell"><TABLE CLASS="display"><TR><TD CLASS="dcell" ALIGN="center">1</TD></TR>
<TR><TD CLASS="hbar"></TD></TR>
<TR><TD CLASS="dcell" ALIGN="center"><I>a</I><SUB>0,<I>j</I></SUB>+<I>a</I><SUB>1,<I>j</I></SUB>
<I>d</I><SUB><I>j</I></SUB>+<I>a</I><SUB>2,<I>j</I></SUB> <I>d</I><SUB><I>j</I></SUB><SUP>2</SUP></TD></TR>
</TABLE></TD><TD CLASS="dcell"> </TD></TR>
</TABLE></TD></TR>
</TABLE></TD></TR>
</TABLE><P>
where :
</P><UL CLASS="itemize"><LI CLASS="li-itemize">
<I>o</I><SUB><I>e</I></SUB>,<I>o</I><SUB><I>a</I></SUB>,<I>o</I><SUB><I>d</I></SUB>,<I>o</I><SUB><I>s</I></SUB> are the material properties with respect to
ambiant, diffuse, specular light, <I>S</I> is the
&#X201C;shininess&#X201D; (exponent for specular light)
</LI><LI CLASS="li-itemize"><I>l</I><SUB><I>a</I>,<I>j</I></SUB>,<I>l</I><SUB><I>d</I>,<I>j</I></SUB>,<I>l</I><SUB><I>s</I>,<I>j</I></SUB> are the properties of spot <I>j</I> for
ambiant, diffuse and specular light
</LI><LI CLASS="li-itemize"><I>a</I><SUB>0,<I>j</I></SUB>, <I>a</I><SUB>1,<I>j</I></SUB>, <I>a</I><SUB>2,<I>j</I></SUB> are attenuation coefficients
of spot <I>j</I>, replaced by 1,0,0 if <I>w</I>=0 (no attenuation)
</LI><LI CLASS="li-itemize"><I>d</I><SUB><I>j</I></SUB> is the distance of spot <I>j</I> to the objet
</LI><LI CLASS="li-itemize">&#X3B1;<SUB><I>j</I></SUB> is the angle between the direction of spot <I>j</I> and the
segment from spot <I>j</I> and the object, except if &#X3B1;<SUB><I>j</I></SUB> is
greater to the angle of cutoff of spot <I>j</I> (&#X3B1;<SUB><I>j</I></SUB>=&#X3C0;/2), 
or if <I>w</I>=0 (&#X3B1;<SUB><I>j</I></SUB>=0, no attenuation for directionnal light).
</LI><LI CLASS="li-itemize">&#X3B2;<SUB><I>j</I></SUB> is the angle between the segment spot <I>j</I>-object and
the normale to the objet (if <I>w</I>=0, replace spot <I>j</I>-objet by
the spot direction)
</LI><LI CLASS="li-itemize">&#X3B3;<SUB><I>j</I></SUB> is the angle between the symmetric of the direction 
of the spot w.r.t. the normal of the object 
and the segment object-eye
</LI></UL><H4 CLASS="subsubsection"><A NAME="htoc14">3.5.6</A>  3-d geometry</H4><P>
3-d geometry is based on the same principle than 2-d geometry: a
subsession at the left and the representation in the
middle. Mouse interaction outside the representation will
change the viewpoint, inside the representation it will depending
on the mode: draw a point, a segment, ... according to the mouse
plan displayed above (all mouse clicks are supposed to refer
to this plan, which is perpendicular to the visualisation axis).</P><H3 CLASS="subsection"><A NAME="toc6"></A><A NAME="htoc15">3.6</A>  Spreadsheet</H3><P>
Use the <CODE>Table-&gt;new spreadsheet</CODE> menu to add a spreadsheet level.
You will see a small configuration screen where you can change
the number of rows/columns, if an attached graph is displayed,
and also a variable name that you can use to get values
from commandlines outside of the spreadsheet (using the matrix notation,
e.g. <TT>a[1,2]</TT> will return the value of the cell at row 2, column 3
in <TT>xcas</TT> syntax mode, or at row 1, column 2 in other syntax modes). 
You can modify the spreadsheet configuration by hitting the
status line above the cells or with the 
spreadsheet <CODE>File-&gt;variable name</CODE> menu later).
If you have choosed to display the graph inside the spreadsheet
configuration, it will dynamically
display all cells that evaluate to a graphic object. 
You may also display all the graphic
objects of the spreadsheet in a separate window, either in 2-d or in 3-d by 
hitting the <SPAN CLASS="textboxed">2d</SPAN> or <SPAN CLASS="textboxed">3d</SPAN> button at the right of 
the spreadsheet menu.</P><P>A cell may contain
a fixed value (any valid Xcas object: integer, real, symbols,
algebraic objects, strings, ...) or a formula depending on other
cells. The syntax for formulas is the same as for many spreadsheet, 
begin with a <CODE>=</CODE>, then enter an algebraic expression where
other cells are represented using a symbol made of the column
name (e.g. A) and the row number (e.g. 1). When copying cells,
cell dependance in a formula is considered relative
unless you write a dollar ($) sign before the column name or
row number. You can enter an area instead of a cell name, an area
is always a rectangular area, it is made of two cell names separated
by <CODE>..</CODE> representing opposite vertices of the rectangular area.</P><P>To enter a new value or formula in a cell, click on the cell, then
enter your value or formula with the keyboard. As soon as you type
a normal character, the focus will move from the sheet to the
commandline above the sheet. To help enter formula, you can use the mouse 
to select a cell or a cell area. Once the value or formula is correct
press the enter key to validate it. You can cancel your edit at
any time by pressing the Esc key.</P><P>To modify a cell value, click on the cell so that the value or formula
is displayed in the commandline above, then click in the commandline,
modify it and press Enter (or Esc to cancel).</P><P>You can move in the sheet using the mouse or the direction keys, or
using the &#X201C;goto&#X201D; input value at the topleft of the sheet. Just enter
a cell name then enter to move there. If the cell does not exist,
the sheet will be enlarged to make it exist. You can also enter
an area in the &#X201C;goto&#X201D; input value to select this area without the
mouse. You must use the &#X201C;goto&#X201D; input value to make special
selections that are not connected areas, for example <CODE>A1..B3,D,F</CODE> will
&#X201C;select&#X201D; the tabular with rows 1 to 3 and columns A, B, D and F.
You can copy and paste a rectangular area with the mouse like this:
select the rectangular area with the mouse, click on the target cell,
click on the commandline, type Ctrl-U to erase the previous
value then click on the middle button and type enter.</P><P>If you want to copy a cell formula to an area of the spreadsheet,
push at the right bottom part of the cell (when the mouse is on the
correct area of the cell, it will display a different cursor)
and move the mouse over the area you want to
copy, then release the mouse.
You can also copy cells using a menu item in the spreadsheet
<CODE>Edit</CODE> menu, you can either copy to the left, or to the bottom,
or to a rectangular area previously selected with the mouse (in this
case the cell which was below the mouse when you pushed the button
will be copied to the rectangular area).</P><P>The spreadsheet can be saved, exported, imported, etc. using the
spreadsheet <CODE>File</CODE> menu. The spreadsheet is also saved 
as part of the session (but not as a standalone spreadsheet)
when you save the whole session. When you load a session, the
spreadsheet will not be evaled automatically, you must reeval
it with the <CODE>reeval</CODE> button explicitely (or modify one cell).</P><P>Xcas does not provide filters for native binary spreadsheet formats,
but you can import spreadsheet from other softwares or data using
copy/paste or by saving them in the text CSV (comma separated values) format:
cells values must always be separated by the same character e.g. a comma, and
another character should be used to start a new row like a newline.
For example, you can select a spreadsheet area inside Open Office
and paste it inside Xcas.
If you want to import formulas instead of values,
use the Tools-&gt;Option menu of Open Office, find the spreadsheet Display item
and check Formulas. Select the area inside Open Office, then
paste at the same upper left cell position inside Xcas.
Alternatively you can save the spreadsheet in CSV format inside
Open Office with the <CODE>File-&gt;Save as</CODE> 
menuitem, then select CSV in the choosebox below. 
Then inside Xcas, use the <CODE>File-&gt;Insert CSV</CODE> menu item,
select the file, change the separators if Xcas made a bad guess.
Note that Xcas must use row numerotation starting
at 1 instead of 0 for Open Office CSV formula import (this is the default).</P><P>Click on the status line or select inside the <CODE>Edit</CODE> menu
for configuration and sheet modifications operations. Configuration
operations should be self-explanatory, except for matrix fill cells : 
when entering a matrix in the commandline, 
you can choose between two modes, either the matrix will fill
a rectangular area of cells, or it will fill only one cell.</P><P>The <CODE>Stats</CODE>
menu is useful to make statistic plots in the corresponding graph.
When you make a graph using this menu, you will have to select
the data area where the statistic function will be applied (e.g.
a polygonplot on <CODE>A1..B10</CODE>) and a target cell. The target
cell is a regular cell which was empty and will contain the formula
defining the graphic object that will be displayed. If you check the
value box, the graph will not change later, but if you don&#X2019;t check
the value box and modify
one data cell later, the graph will be updated like any cell 
depending on this data cell would be.</P><H3 CLASS="subsection"><A NAME="toc7"></A><A NAME="htoc16">3.7</A>  Logo-like turtle</H3><P>
To add a turtle session, use the <CODE>Turtle-&gt; new turtle</CODE> menu.
A logo level is made of three parts, the graphic display 
in the middle, a subsession of commandlines at the left
and an editor at the right. Commandlines are executed as in
a main session (commandlines below an evaluated command
are not reevaluated unlike in a geometry session). The editor
records all commands.</P><P>In a logo level, you can pilot a turtle, giving it orders like forward
10 steps, turn left or right, etc. It will display a trace
using a pen with a defined color. 
You can use any language construction of Xcas to program the
turtle moves. The current language use French commandnames
(e.g. avance=move forward, etc.), the most important commandnames
are available by clicking on the buttonbar below the turtle screen
(check that the cursor is on a commandline before clicking on
the button corresponding to the command you want to enter).
Most commands have a default argument (e.g. 10 for avance),
if you want to add parameters, do not add parenthesis. Logo
commands use the same syntax as the <CODE>return</CODE> statement,
if you want to specify priorities, put parenthesis around
the command and arguments, like this <CODE>(hasard 10)</CODE>.</P><HR>
<A HREF="casinter002.html"><IMG SRC="previous_motif.gif" ALT="Previous"></A>
<A HREF="index.html"><IMG SRC="contents_motif.gif" ALT="Up"></A>
<A HREF="casinter004.html"><IMG SRC="next_motif.gif" ALT="Next"></A>
</BODY>
</HTML>
