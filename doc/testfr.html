<!DOCTYPE html>
<html >
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="hevea 2.28">
<style type="text/css">
.li-itemize{margin:1ex 0ex;}
.li-enumerate{margin:1ex 0ex;}
.dd-description{margin:0ex 0ex 1ex 4ex;}
.dt-description{margin:0ex;}
.toc{list-style:none;}
.footnotetext{margin:0ex; padding:0ex;}
div.footnotetext P{margin:0px; text-indent:1em;}
.thefootnotes{text-align:left;margin:0ex;}
.dt-thefootnotes{margin:0em;}
.dd-thefootnotes{margin:0em 0em 0em 2em;}
.footnoterule{margin:1em auto 1em 0px;width:50%;}
.caption{padding-left:2ex; padding-right:2ex; margin-left:auto; margin-right:auto}
.title{margin:2ex auto;text-align:center}
.titlemain{margin:1ex 2ex 2ex 1ex;}
.titlerest{margin:0ex 2ex;}
.center{text-align:center;margin-left:auto;margin-right:auto;}
.flushleft{text-align:left;margin-left:0ex;margin-right:auto;}
.flushright{text-align:right;margin-left:auto;margin-right:0ex;}
div table{margin-left:inherit;margin-right:inherit;margin-bottom:2px;margin-top:2px}
td table{margin:auto;}
table{border-collapse:collapse;}
td{padding:0;}
.cellpadding0 tr td{padding:0;}
.cellpadding1 tr td{padding:1px;}
pre{text-align:left;margin-left:0ex;margin-right:auto;}
blockquote{margin-left:4ex;margin-right:4ex;text-align:left;}
td p{margin:0px;}
.boxed{border:1px solid black}
.textboxed{border:1px solid black}
.vbar{border:none;width:2px;background-color:black;}
.hbar{border:none;height:2px;width:100%;background-color:black;}
.hfill{border:none;height:1px;width:200%;background-color:black;}
.vdisplay{border-collapse:separate;border-spacing:2px;width:auto; empty-cells:show; border:2px solid red;}
.vdcell{white-space:nowrap;padding:0px; border:2px solid green;}
.display{border-collapse:separate;border-spacing:2px;width:auto; border:none;}
.dcell{white-space:nowrap;padding:0px; border:none;}
.dcenter{margin:0ex auto;}
.vdcenter{border:solid #FF8000 2px; margin:0ex auto;}
.minipage{text-align:left; margin-left:0em; margin-right:auto;}
.marginpar{border:solid thin black; width:20%; text-align:left;}
.marginparleft{float:left; margin-left:0ex; margin-right:1ex;}
.marginparright{float:right; margin-left:1ex; margin-right:0ex;}
.theorem{text-align:left;margin:1ex auto 1ex 0ex;}
.part{margin:2ex auto;text-align:center}
.lstlisting{font-family:monospace;white-space:pre;margin-right:auto;margin-left:0pt;text-align:left}
</style>
<title>Exemple de calculs interactifs dans un fichier LATEX compilé
en HTML et PDF.
</title>
</head>
<body >
<!--HEVEA command line is: hevea -fix testfr -->
<!--CUT STYLE article--><!--CUT DEF section 1 --><p>


<div>
<div id="maindiv" style="max-height: 500px; overflow:auto">


</p><table class="title"><tr><td style="padding:1ex"><h1 class="titlemain">Exemple de calculs interactifs dans un fichier L<sup>A</sup>T<sub>E</sub>X compilé
en HTML et PDF.</h1><h3 class="titlerest">B. Parisse<br>
Institut Fourier<br>
UMR 5582 du CNRS
<br>
Université de Grenoble</h3><h3 class="titlerest">Juillet 2015</h3></td></tr>
</table><!--TOC section id="sec1" Table des matières-->
<h2 id="sec1" class="section">Table des matières</h2><!--SEC END --><ul class="toc"><li class="li-toc">
<a href="#sec3">1  Description</a>
</li><li class="li-toc"><a href="#sec4">2  Installation</a>
</li><li class="li-toc"><a href="#sec5">3  Utilisation</a>
</li><li class="li-toc"><a href="#sec6">4  Postprocessing</a>
</li></ul><!--TOC section id="sec2" Index-->
<h2 id="sec2" class="section">Index</h2><!--SEC END --><p></p><table style="border-spacing:6px;border-collapse:separate;" class="cellpading0"><tr><td style="vertical-align:top;text-align:left;" ><ul class="indexenv"><li class="li-indexenv">
giaccmd, <a href="#hevea_default11">3</a>
</li><li class="li-indexenv">giaccmdbigmath, <a href="#hevea_default8">3</a>
</li><li class="li-indexenv">giaccmdmath, <a href="#hevea_default6">3</a>
</li><li class="li-indexenv">giacinput, <a href="#hevea_default10">3</a>
</li><li class="li-indexenv">giacinputbig, <a href="#hevea_default9">3</a>
</li><li class="li-indexenv">giacinputbigmath, <a href="#hevea_default7">3</a>
</li><li class="li-indexenv">giacinputmath, <a href="#hevea_default5">3</a>
</li><li class="li-indexenv">giacjs, <a href="#hevea_default1">3</a>
</li><li class="li-indexenv">giacjshere, <a href="#hevea_default0">3</a>
</li></ul></td><td style="vertical-align:top;text-align:left;" ><ul class="indexenv"><li class="li-indexenv">giacjsonline, <a href="#hevea_default2">3</a>
</li><li class="li-indexenv">giaclink, <a href="#hevea_default14">3</a>
</li><li class="li-indexenv">giacprog, <a href="#hevea_default12">3</a>
</li><li class="li-indexenv">giacslider, <a href="#hevea_default13">3</a>
<br>
<br>
</li><li class="li-indexenv">index, <a href="#hevea_default4">3</a>
<br>
<br>
</li><li class="li-indexenv">table, <a href="#hevea_default3">3</a>
</li></ul></td></tr>
</table>
<!--TOC section id="sec3" Description-->
<h2 id="sec3" class="section">1  Description</h2><!--SEC END --><p>
Ce source L<sup>A</sup>T<sub>E</sub>X illustre l’utilisation du moteur de calcul formel Giac
lorsqu’on le compile en HTML avec <span style="font-family:monospace">hevea</span> (testé avec
<code>hevea 2.23, 2.25</code>). Il est possible de compiler à la fois
vers HTML5 et vers PDF en compilant avec <span style="font-family:monospace">icas</span> sous linux.</p>
<!--TOC section id="sec4" Installation-->
<h2 id="sec4" class="section">2  Installation</h2><!--SEC END --><p>
Vous devez installer
<a href="http://hevea.inria.fr">hevea</a> 
et recopier
<a href="http://www-fourier.ujf-grenoble.fr/%7eparisse/giac/giacfr.tex">giacfr.tex</a>
et <a href="http://hevea.inria.fr/distri/hevea.sty">hevea.sty</a>
dans le même répertoire que votre fichier source.
Vous pouvez télécharger une copie du source
<a href="http://www-fourier.ujf-grenoble.fr/%7eparisse/giac/testfr.tex">testfr.tex</a>
de ce fichier et vérifier votre installation en le compilant<br>
<code>hevea testfr</code></p>
<!--TOC section id="sec5" Utilisation-->
<h2 id="sec5" class="section">3  Utilisation</h2><!--SEC END --><p> 
La commande<code>\begin{giacjshere}</code><a id="hevea_default0"></a>, 
<code>\begin{giacjs}</code><a id="hevea_default1"></a> ou <code>\begin{giacjsonline}</code><a id="hevea_default2"></a>
doit figurer juste après <code>\begin{document}</code>, selon que l’on va charger le moteur
de calcul <code>giac.js</code> de la même façon que la page HTML,
depuis une installation de Xcas sur le disque dur
ou depuis le serveur de l’Institut Fourier. La
commande correspondante <code>\end{giacjs}</code>, <code>\end{giacjshere}</code> 
ou <code>\end{giacjsonline}</code> 
doit figurer juste avant <code>\end{document}</code>.
Pour que les liens du tableau de bord Table et Index fonctionnent,
vous devez imprimer la table des matières et l’index au début du
document, comme dans ce fichier (commandes <code>\tableofcontents</code><a id="hevea_default3"></a> et
<code>\printindex</code><a id="hevea_default4"></a> juste après
<code>\begin{giacjsonline}</code> et commande <code>\makeindex</code> 
juste avant <code>\begin{document}</code>).</p><p>Pour créer une commande en ligne avec réponse en MathML (ou
graphique 2d) utilisez
<code>\giacinputmath{}</code>,
par exemple<br>
<code>\giacinputmath{factor(x^10-1)}</code><a id="hevea_default5"></a>
<br><textarea onkeypress="UI.ckenter(event,this,2)" style="width:400px;height:20px;font-size:large">factor(x^10-1) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">ok</button><span></span><br>
On peut ajouter un argument optionnel pour changer le style :<br>
<code>\giacinputmath[style="width:200px;height:20px;font-size:large"]{factor(x^10-1)}</code><br>
<br><textarea onkeypress="UI.ckenter(event,this,2)" style="width:200px;height:20px;font-size:large">factor(x^10-1) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">ok</button><span></span><br>
Vous pouvez imposer la commande appliquée avec
<code>\giaccmdmath{}{}</code>,
par exemple<br>
<code>\giaccmdmath{factor}{x^4-1}</code><a id="hevea_default6"></a> 
<br><textarea style="width:400px;height:20px;font-size:large">x^4-1
</textarea><button onclick="var tmp=UI.caseval('factor('+
previousSibling.value+')');  tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling]);
">factor
</button><span></span><br>
et ajouter un argument de style<br>
<code>\giaccmdmath[style="width:200px;height:20px;font-size:large"]{factor}{x^4-1}</code><br>
<br><textarea style="width:200px;height:20px;font-size:large">x^4-1
</textarea><button onclick="var tmp=UI.caseval('factor('+
previousSibling.value+')');  tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling]);
">factor
</button><span></span><br></p><p>Pour cacher le champ de saisie et donner un nom au bouton, 
utiliser <code>\giachidden{}{}</code> 
ou <code>\giachiddenmath{}{}</code> 
par exemple

<textarea onkeypress="UI.ckenter(event,this,1)" 
style="display:none;width:400px;height:20px;font-size:large">factor(x^10-1)
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">
reponse
</button><span></span><br>
 ou
<br><textarea onkeypress="UI.ckenter(event,this,2)" style="display:none;width:400px;height:20px;font-size:large">factor(x^10-1) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML='&nbsp;'+tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">reponse
</button><span></span><br></p><p>Pour créer une commande hors-ligne avec réponse en MathML (ou sous forme de graphique 2d)
utilisez <code>\giacinputbigmath{}</code> ou 
<code>\giaccmdbigmath{}{}</code>, ces commandes
acceptent aussi un argument optionnel de style :<br>
<code>\giacinputbigmath{factor(x^100-1)}</code><a id="hevea_default7"></a><br>
<div><textarea onkeypress="UI.ckenter(event,this,2)" style="width:800px;height:20px;font-size:large">factor(x^100-1) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML=tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">ok</button><div style="width:800px;max-height:200px;overflow:auto;color:blue;text-align:center"></div></div><br>
<code>\giacinputbigmath[style="width:600px;height:20px;font-size:large"]{factor(x^100-1)}</code><br>
<div><textarea onkeypress="UI.ckenter(event,this,2)" style="display:none;width:600px;height:20px;font-size:large">factor(x^100-1) 
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value); tmp=UI.latexeval(tmp);nextSibling.innerHTML=tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">ok</button><div style="width:800px;max-height:200px;overflow:auto;color:blue;text-align:center"></div></div><br>
<code>\giaccmdbigmath{factor}{x^100-1}</code><a id="hevea_default8"></a><br>
<br><textarea style="width:800px;height:20px;font-size:large">x^100-1 
</textarea><button onclick="var tmp=UI.caseval('factor('+
previousSibling.value+')');  tmp=UI.latexeval(tmp);nextSibling.innerHTML=tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">factor
</button><div style="width:800px;max-height:200px;overflow:auto;color:blue;text-align:center"></div><br><br>
<code>\giaccmdbigmath[style="width:600px;height:20px;font-size:large"]{factor}{x^100-1}</code><br>
<br><textarea style="width:600px;height:20px;font-size:large">x^100-1 
</textarea><button onclick="var tmp=UI.caseval('factor('+
previousSibling.value+')');  tmp=UI.latexeval(tmp);nextSibling.innerHTML=tmp; if (UI.usemathjax) MathJax.Hub.Queue(['Typeset',MathJax.Hub,nextSibling])">factor
</button><div style="width:800px;max-height:200px;overflow:auto;color:blue;text-align:center"></div><br></p><p>Pour une commande avec réponse en mode texte ou sous forme de graphique 2d 
utiliser <code>\giacinput</code>ou
<code>\giacinputbig</code><a id="hevea_default9"></a>, 
par exemple<br>
<code>\giacinput{factor(x^4-1)}</code><a id="hevea_default10"></a> donne :<br>

<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:400px;height:20px;font-size:large">factor(x^4-1)
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">ok</button><span></span><br>
<br>
La même avec un argument de style optionnel de la ligne de commande<br>
<code>\giacinput[style="width:200px;height:20px;font-size:large"]{plot(sin(x))}</code><br>

<textarea onkeypress="UI.ckenter(event,this,1)" 
style="width:200px;height:20px;font-size:large">plot(sin(x))
</textarea><button onclick="previousSibling.style.display='inherit';var tmp=UI.caseval(previousSibling.value);tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">ok</button><span></span><br>
</p><p>Un bouton avec une commande qui sera appliquée à un argument avec
<code>\giaccmd</code>, ici <code>\giaccmd{factor}{x^4-1}</code><a id="hevea_default11"></a> :<br>

<textarea
style="width:400px;height:20px;font-size:large">x^4-1
</textarea><button onclick="var tmp=UI.caseval(
'factor('
+previousSibling.value+')');tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">
factor
</button><span></span><br>
<br>
accepte aussi un argument de style optionnel :<br>
<code>\giaccmd[style="width:200px;height:20px;font-size:large"]{factor}{x^4-1}</code><br>

<textarea
style="width:200px;height:20px;font-size:large">x^4-1
</textarea><button onclick="var tmp=UI.caseval(
'factor('
+previousSibling.value+')');tmp=UI.rmquote(tmp); nextSibling.innerHTML='&nbsp;'+tmp;UI.render_canvas(nextSibling);">
factor
</button><span></span><br>
</p><p><span style="font-weight:bold">Attention</span>, pour toutes ces commandes, il faut remplacer dans le
source latex le signe <code>&lt;</code> par
<code>&amp;lt;</code> et <code>&gt;</code> par <code>&amp;gt;</code> sinon ces caractères
sont interprétés comme des délimieturs HTML.</p><p>La même chose avec un programme ou une commande de plusieurs lignes
avec <code>\begin{giacprog}...\end{giacprog}</code><a id="hevea_default12"></a> :

</p><pre class="verbatim">f(x):={
  local y;
  si x&lt;0 alors y:=-x; sinon y=x; fsi;
  return y;
}
</pre><p> 
<button onclick="var field=parentNode.previousSibling; var tmp=field.innerHTML;if(tmp.length==0) tmp=field.value;var t=createElement('TEXTAREA');t.style.fontSize=16;t.cols=60;t.rows=10;var tmp1=UI.ltgt(tmp);t.value=tmp1;tmp=UI.caseval(tmp);tmp=UI.rmquote(tmp);nextSibling.innerHTML=tmp; UI.render_canvas(nextSibling.innerHTML); field.parentNode.insertBefore(t,field);field.parentNode.removeChild(field);">ok</button><span></span><br>

Ici on peut utiliser les caractères <code>&lt;</code> et <code>&gt;</code>. Attention, il 
ne pas utiliser cet environement dans un autre environement (itemize,
enumerate...).
Si vous souhaitez que le programme soit interprété au chargement
de la page HTML, utilisez <code>giaconload</code> au lieu de <code>giacprog</code>.</p><p>La commande <code>\giacslider{}{}{}{}{}</code>
permet de créer une variable
modifiable par le lecteur à la souris et des calculs qui
dépendent de cette variable :<br>
<code>\giacslider{a}{-5}{5}{0.1}{2.3}{plot(x^2+a*x)}</code><a id="hevea_default13"></a> <br>


<div><form onsubmit="setTimeout(function(){UI.eval_form(form);});return false;">
<input type="text" name="name" size="1" value=
"a">

=<input type="number" name="valname" onchange="UI.eval_form(form);" value=
"2.3">

<input type="button" value="-" onclick="valname.value -= stepname.value;UI.eval_form(form);">
<input type="button" value="+" onclick="valname.value -= -stepname.value;UI.eval_form(form);">
<input type="number" name="stepname" value=
"0.1">

<input type="range" name="rangename"
onclick="valname.value=value;UI.eval_form(form);" value=
"2.3" min="-5" max="5" step="0.1">

<textarea name="prog" onchange="UI.eval_form(form)" style="width:400px;height:120px;vertical-align:bottom;font-size:large">
plot(x^2+a*x)

</textarea>
</form>
<span>Not evaled</span></div>
</p><p>Pour créer un lien utiliser <code>\giaclink{}</code>, par
exemple un lien vers Xcas offline :<br>
<code>\giaclink{http://www-fourier.ujf-grenoble.fr/\%7eparisse/xcasfr.html#+factor(x^4-1)&amp;+a:=idn(3)&amp;}</code><a id="hevea_default14"></a><br>
<a href="http://www-fourier.ujf-grenoble.fr/%7eparisse/xcasfr.html#+factor(x^4-1)&+a:=idn(3)&"
 target="_blank">Tester en ligne
</a></p>
<!--TOC section id="sec6" Postprocessing-->
<h2 id="sec6" class="section">4  Postprocessing</h2><!--SEC END --><p>
On peut utiliser <code>hevea --mathjax</code> du fork<br>
<code>https://github.com/YannickChevalier/hevea-mathjax</code>
pour laisser MathJax faire le rendu des formules mathématiques.
On peut alors convertir en mathml en utilisant itex2mml<br>
<code>https://golem.ph.utexas.edu/~distler/blog/itex2MML.html</code>
Attention, il faut remplacer <code>\(</code> et <code>\)</code> par <code>$</code>,
certains caractères ne sont pas supportés (par exemple <code>\ </code>),
et <code>\begin{equation}</code> ou <code>eqnarray</code> n’est pas supporté.</p><p>

</div>
<div id="controldiv" style="max-height: 400px; overflow:auto">
<span id="controlindex"></span>
<button title="Efface la console" onclick="document.getElementById('output').innerHTML='';">Efface</button>
<button title="Augmente la taille de la console" onclick="var field=document.getElementById('output'); var s=field.style.maxHeight; s=s.substr(0,s.length-2);s=eval(s)+20 ;s=s+'px';field.style.maxHeight =s;">+</button>
<button title="Diminue la taille de la console" onclick="var field=document.getElementById('output'); var s=field.style.maxHeight; s=s.substr(0,s.length-2);s=eval(s)-20 ; if(s>100){s=s+'px';field.style.maxHeight =s;}">-</button>
<textarea title="Ligne de commande pour un calcul rapide" onkeypress="UI.ckenter(event,this,3)" style="width:400px;height:20px;font-size:large"></textarea><button  title="Evalue cellule precedente" onclick="UI.quick(this);">-></button><span></span>
&nbsp;&nbsp;<button onclick="var s=UI.caseval('restart;'); Module.print(s);" title="Reinitialise le moteur de calcul formel">Restart</button>
<button onclick="UI.exec(document.documentElement);" title='Cliquer ici pour executer toutes les commandes (attention cela peut etre long!)'>Exec. tout</button>
<canvas id='canvas' width=0 height=0   onmousedown="UI.canvas_pushed=true;UI.canvas_lastx=event.clientX; UI.canvas_lasty=event.clientY;"  onmouseup="UI.canvas_pushed=false;" onmousemove="UI.canvas_mousemove(event,'')"></canvas>
<div id="output" style="max-height: 100px; overflow:auto"></div>
</div>
</div>


<script language="javascript"> 
var Module = { 
        htmlcheck:true,
        htmlbuffer:'',
        preRun: [],
        postRun: [],
        print: (function() {
          var element = document.getElementById('output');
          element.innerHTML='';// element.value = ''; // clear browser cache
          return function(text) {
            //console.log(text.charCodeAt(0));
            if (text.length==1 && text.charCodeAt(0)==12){ element.innerHTML=''; return; }
            if (text.length>=1 && text.charCodeAt(0)==2) {console.log('STX');Module.htmlcheck=false; htmlbuffer='';return;}
            if (text.length>=1 && text.charCodeAt(0)==3) {console.log('ETX');Module.htmlcheck=true; element.style.display='inherit'; element.innerHTML += htmlbuffer;htmlbuffer='';element.scrollTop = 99999; return;}
            if (Module.htmlcheck){
            // These replacements are necessary if you render to raw HTML 
             text = text.replace(/&/g, "&amp;");
             text = text.replace(/</g, "&lt;");
             text = text.replace(/>/g, "&gt;");
             text = text.replace('\n', '<br>', 'g');
             text += '<br>'
             element.style.display='inherit';
             element.innerHTML += text; // element.value += text + "\n";
             element.scrollTop = 99999; // focus on bottom
            } else htmlbuffer += text;
          };
        })(),
     canvas: document.getElementById('canvas'),};
</script>


<script src="giac.js" async></script> 



<script language="javascript">
 var UI = {
  histcount:0,
  usemathjax:false,
  canvas_pushed:false,
  canvas_lastx:0,
  canvas_lasty:0,
  canvas_mousemove:function(event,no){
    if (UI.canvas_pushed){
      // Module.print(event.clientX);
      if (UI.canvas_lastx!=event.clientX){
        if (event.clientX>UI.canvas_lastx)
          giac3d('r'+no);
        else
          giac3d('l'+no);
        UI.canvas_lastx=event.clientX;
      }
      if (UI.canvas_lasty!=event.clientY){
        if (event.clientY>UI.canvas_lasty)
          giac3d('d'+no);
        else
          giac3d('u'+no);
        UI.canvas_lasty=event.clientY;
      }
    }
  },  
  ltgt:function(s){
    var ss=s.length,i,res='';
    for (i=0;i<ss-4;i++){
      if (s[i]!='&' || s[i+2]!='t' || s[i+3]!=';'){
        res += s[i];
        continue;
      }
      if (s[i+1]=='l'){
        res += '<';
        i +=3;
        continue;
      }
      if (s[i+1]=='g'){
        res += '>';
        i +=3;
        continue;
      }
      res += s[i];
    }
    for (;i<ss;i++) res+=s[i];
    return res;
  },
  rmquote:function(tmp){
    var s=tmp.length;
    if (s>2 && tmp.charCodeAt(0)==34 && tmp.charCodeAt(s-1)==34)
      tmp=tmp.substr(1,s-2);
    return tmp;
  },
  quick:function(field){
    var tmp1=field.previousSibling.value;
    var tmp=UI.caseval(tmp1);
    tmp=UI.rmquote(tmp); 
    tmp=UI.latexeval(tmp);
    Module.print(String.fromCharCode(2));
    Module.print("<tt>");
    Module.print(tmp1);
    Module.print("</tt><br>&nbsp;&nbsp;");
    Module.print(tmp);
    Module.print("<br>");
    Module.print(String.fromCharCode(3));
    field.nextSibling.innerHTML='&nbsp;'+tmp;
   //UI.render_canvas(nextSibling);  
  },
  caseval:function(text){
    var s="non evalu&eacute;",err;
    try {
       s= giaceval(text);
    } catch (err) { s=err.message;}
    var is_3d=s.length>5 && s.substr(0,5)=='gl3d ';
    if (is_3d){
	var n3d=s.substr(5,s.length-5);
	s = '<canvas id="gl3d_'+n3d+'" onmousedown="UI.canvas_pushed=true;UI.canvas_lastx=event.clientX; UI.canvas_lasty=event.clientY;" onmouseup="UI.canvas_pushed=false;" onmousemove="UI.canvas_mousemove(event,'+n3d+')" width=400 height=250></canvas>';
    }
    return s;
  },
  render_canvas:function(field){
   var n=field.id;
   if (n && n.length>5 && n.substr(0,5)=='gl3d_'){
    Module.print(n);
    var n3d=n.substr(5,n.length-5);
    giac3d(n3d);
    return;
   }
   var f=field.firstChild;
   for (;f;f=f.nextSibling){
     UI.render_canvas(f);
   }
  },
  eval_form: function(field){
    giaceval('assume('+field.name.value+'='+field.valname.value+')');
    var s=UI.caseval(field.prog.value);
    var is_svg=s.substr(1,4)=='<svg';
    if (is_svg) field.parentNode.lastChild.innerHTML=s.substr(1,s.length-2);
    else field.parentNode.lastChild.innerHTML=s;
    UI.render_canvas(field.parentNode.lastChild);
  },
  latexeval:function(text){
    var tmp=text;
    if (tmp.length>5 && tmp.substr(0,5)=='gl3d_') return tmp;
    if (tmp.length>5 && tmp.substr(1,4)=='<svg') return tmp.substr(1,tmp.length-2);
    if (tmp.length>5 && tmp.substr(0,4)=='<svg') return tmp;
     if (UI.usemathjax){
       tmp=giaceval('latex(quote('+tmp+'))');
       tmp='$$'+tmp.substr(1,tmp.length-2)+'$$';
       return tmp;
     }
     tmp=giaceval('mathml(quote('+tmp+',1))');
     tmp=tmp.substr(1,tmp.length-2);
    return tmp;   
  },
  ckenter:function(event,field,mode){
    var key = event.keyCode;
    if (key != 13 || event.shiftKey) return true;
   if (mode==3){ UI.quick(field.nextSibling); event.preventDefault(); return true; }
    var tmp=field.value;
   Module.print(tmp);
    tmp=UI.caseval(tmp);
    if (mode==1){
      tmp=UI.rmquote(tmp); 
   }
   if (mode==2){
     tmp=UI.latexeval(tmp);
   }
   field.nextSibling.nextSibling.innerHTML=tmp;
   UI.render_canvas(field.nextSibling.nextSibling);
   if (UI.usemathjax) MathJax.Hub.Queue(["Typeset",MathJax.Hub,field.nextSibling.nextSibling]);
   if (event.preventDefault) event.preventDefault();
    return false;
  },
  exec: function(field){
     if (field.nodeName=="BUTTON"){
        field.click();
        return;
     }
     var f=field.firstChild;
     while (f){
       UI.exec(f);
       f=f.nextSibling;
     }
   },
  execonload: function(field){
     var f=field.nextSibling;
     if (f && f.innerHTML=="onload" && field.nodeName=="BUTTON"){
        field.click();
        return;
     }
     f=field.firstChild;
     while (f){
       UI.execonload(f);
       f=f.nextSibling;
     }
   },
  textarealtgt: function(field){
     if (field.nodeName=="TEXTAREA"){
        field.value=UI.ltgt(field.value);
        return;
     }
     var f=field.firstChild;
     while (f){
       UI.textarealtgt(f);
       f=f.nextSibling;
     }
   }
 };
 window.onload = function(e){
   var isFirefox = typeof InstallTrigger !== 'undefined';   // Firefox 1.0+
   var isSafari = Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0;
  var ua = window.navigator.userAgent;
  var old_ie = ua.indexOf('MSIE ');
  var new_ie = ua.indexOf('Trident/');
  if ((!isFirefox && !isSafari) || (old_ie > -1) || (new_ie > -1) || window.chrome){
     UI.usemathjax=true;
     alert("Votre navigateur ne supporte MathML, on utilise MathJax pour l'affichage 2d.  Les calculs seraient plus rapides et les resultats seraient mieux affiches avec Firefox.");
  }
  if (UI.usemathjax){
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  }
  var elem= document.getElementById('controlindex');
  elem.innerHTML='<hr><a href="'+String.fromCharCode(35)+'sec1">Table</a>, <a href="'+String.fromCharCode(35)+'sec2">Index</a>'+elem.innerHTML;
  elem=document.getElementById('maindiv');
  if (elem.style.maxHeight=='500px')
    elem.style.maxHeight=(window.innerHeight-120)+'px';
  giaceval=Module.cwrap('caseval',  'string', ['string']);
  giac3d = Module.cwrap('_ZN4giac13giac_rendererEPKc','number', ['string']);
  giaceval('set_language(1);');
  giaceval('factor(x^4-1)');
  giaceval('sin(x+y)+f(t)');
  UI.textarealtgt(document.documentElement);
  UI.execonload(document.documentElement);
 // if (confirm('Executer les commandes?')) UI.exec(document.documentElement);
 };
</script>


</p><!--CUT END -->
<!--HTMLFOOT-->
<!--ENDHTML-->
<!--FOOTER-->
<hr style="height:2"><blockquote class="quote"><em>Ce document a été traduit de L<sup>A</sup>T<sub>E</sub>X par </em><a href="http://hevea.inria.fr"><em>H</em><em><span style="font-size:small"><sup>E</sup></span></em><em>V</em><em><span style="font-size:small"><sup>E</sup></span></em><em>A</em></a></blockquote></body>
</html>
