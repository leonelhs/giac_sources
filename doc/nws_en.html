<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html> <head>
  <meta charset="utf-8">
  <meta name=viewport content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="keywords" content="xcas Numworks">
<title>Outils Numworks</title>
<style id="document_style" type="text/css">
* { font-family: sans-serif }

body {
    margin: 20px 15%;
    padding: 30px;
    border-radius: 45px;
    border: 8px solid #55b4d4;
}

ul.b {
  list-style-type: square;
}

/* pour les tous petits écrans */
@media only screen and (max-width: 500px){
    body {
        margin: 20px;
        padding: 20px;
        border-radius: 40px;
    }
}

/* pour les petits écrans */
@media only screen and (max-width: 800px){
    ul { padding-inline-start: 20px }
    h1 { text-align: center }
}

/* pour les grands écrans */
@media only screen and (min-width: 1300px){
    body {
        margin: 50px 20%;
        padding: 50px;
        border-radius: 60px;
    }
}

/* pour éviter que les boutons se touchent d'une <li> à une autre */

li {
    margin-top: 5px;
}

/* pour les boutons */

button {
    height: 30px;
    padding: 0px 15px;
}

input { padding: 5px 15px }

button, input {
    border: solid 0;
    border-radius: 15px;
    cursor: pointer;
    background: #86b300;
    transition: background 200ms;
}

button:hover, input:hover {
    background: #99bf4d;
}

div {
max-height: 300px;
overflow:auto
}

</style>
</head>
<script src="numworks.js"></script>
<script src="nws_sig.js"></script>
<script src="nws.js"></script>
<script src="FileSaver.js"></script>
<script src="jszip.min.js"></script>
<script> UI.langue=0;</script>
<body>
<h1>Connexion kit for unlocked Numworks</h1>
<a href="nws.html">Version francaise</a><br>
<b>Beware, don't upgrade from Numworks site!</b> <button
onclick="let field=$id('update'); if (field.style.display=='block') field.style.display='none'; else field.style.display='block'">More info</button>
<div id='update' style="display:none">
  If you upgrade from Numworks site, this will lock your calculator
  and make it incompatible with Xcas. This is an (almost) irreversible
  process, the only known workaround is explained 
  <a href="https://tiplanet.org/forum/viewtopic.php?f=113&t=25191">here (French)</a>
  it requires some additional hardware and opening the calculator.
<br>
  <b>Installing KhiCAS</b> will transform your Numworks N0110
  in a powerful CAS calculator (a CASworks!), very useful
  for STEM students.
  <br><b>Opinion</b>
  Numworks is locking the N0110 calculator because they think it's
  the best way to make it compatible with some tests rules (e.g. ACT).
  I think it's silly to do that, because someone who want to cheat may
  use an unlocked N0110 and mimic a calculator with an Epsilon 16
  version (e.g. by modifying the version number that appears in the
  settings). Locking a calc is only meaningful if it's locked from the
  beginning (that is from the first sold calc). On the N0110,
  it's more secure
  to certify a firmware like on this page.
  Numworks could sell two easily distinguishable
  calculators, a locked N0120 and
  the N0110 that could remain unlocked and KhiCAS-compatible.
  It's perhaps not too late to make them change their minds, if you
  think like me, tell them your opinion (they will probably take care
  if they receive many feedbacks, especially from math teachers).
</div>
<hr>

<ul id="main" class="b">
  <li> <button class="bouton" onclick="UI.nws_detect(UI.nws_detect_success,UI.nws_detect_failure)">Detect</button>
  the Numworks. Click it if the buttons below do not work.
  If your N0110 calculator screen is off, click on the Rescue button instead.
  <li> 
<button id="numworks_load" class="bouton"
  onclick="UI.numworks_load(false)"
  title="Click here to get the scripts of the calculator">Numworks→</button> or
  <input id="loadbackupinput" accept=".nws" type="file"
  title="Click here to load a backup (.nws) from computer"
  onchange="UI.backup_load((this.files)[0]);">
<button onclick="UI.backup_load(($id('loadbackupinput').files)[0]);">Backup→</button>
  : Python scripts from the calculator or from a backup.
  <span id='storelist'></span>
  <li><button id="numworks_load" class="bouton"
  onclick="UI.numworks_load(true)">Backup</button> :
  save all scripts from the calculator.
  <li>
  <input id="loadfileinput" accept=".py,.nws" type="file"
  title="Cliquer ici pour charger un fichier Python (.py) ou un backup (.nws)"
  onchange="UI.loadFile((this.files)[0]);">
  <button onclick="UI.loadFile(($id('loadfileinput').files)[0]);">→Numworks</button>
  : send a script (<tt>.py</tt> extension) or restore a backup
  (<tt>.nws</tt>) to the calculator.
  <li> 
  <button
  onclick="UI.numworks_install_delta();">KhiCAS install
  (2021/10/17)</button>: on your N0110 calculator
  <a
  href="https://www-fourier.univ-grenoble-alpes.fr/~parisse/numworks/khicasnw.html">Documentation</a>,
  <a
  href="https://www-fourier.univ-grenoble-alpes.fr/~parisse/numworks/khicasnw.html#sec45">Licences</a>
  (French),
  <a
  href="https://www-fourier.univ-grenoble-alpes.fr/~parisse/numworks/khicasnw.html#sec47">Source</a>.
  <li> <button
  onclick="if (confirm(UI.langue==-1?'Veuillez confirmer que l\'installation de cette archive personnalisee est sous votre responsabilite.':'Please confirm that installing a custom archive is under your responsability.')) $id('persoinit').style.display='inline'">Customize flash
  </button> (<button
  onclick="UI.numworks_install_delta(1,1);">Khi</button> must be
  installed)
  <br>
  <span id="persoinit" style="display:none"> Init from
    <button onclick="UI.numworks_gettar(1)">calculator→</button>
    or
    <button onclick="UI.numworks_gettar(0)">KhiCAS</button>
    or
  <input id="loadtarinput" accept=".tar" type="file"
  title="Click here to load a tar archive (.tar)"
  onchange="UI.file_gettar((this.files)[0]); $id('perso').style.display='inline';">
  <!-- <button
  onclick="UI.file_gettar(($id('loadtarinput').files)[0]);$id('perso').style.display='inline';">sauvegarde tar</button>-->
ou <button onclick="UI.tar_clear(UI.numworks_buffer)">Clear</button>
<br>
  <span id="perso" style="display:none">
    Add files:
    <input id="addtarinput"  type="file"
    title="Click here to add a file"
    onchange="UI.tar_addfile((this.files)[0]);">
<!--    <button
  onclick="UI.tar_addfile(($id('addtarinput').files)[0]);">Ajouter</button> -->
    <hr>
    <div  id="listtarfiles" >
    </div>
    <hr>
    <button onclick="UI.numworks_sendtar();">Install</button> or
    <button onclick="UI.file_savetar(UI.numworks_buffer,'myapps.tar')">save</button> customization.
  </span>
  </span>
  <li> Install or certification progress<hr>
  <span id="ploglegend"></span>
  <progress id="plog" value=0 style="display:none"></progress>
  <div id="output" style="max-height: 200px; overflow:auto"></div>
  <hr>
  <li>
  If you want to certify that a N0110 calculator firmware  is
  a genuine version of KhiCAS, click on one of the two buttons.
  <br>
  <button
  onclick="UI.numworks_certify(nws_sig,false);">Certification</button> 
  <button
  onclick="UI.numworks_certify(nws_sig,true);">Certification + R/W test</button>
  <br>
  First test takes about 15 secondes, the second one is more secure
  but it takes about 1 minute and it writes data on the calc.
  These tests may be done by a proctor during an exam with a
  smartphone from this
<a
href="https://www-fourier.univ-grenoble-alpes.fr/~parisse/nws_en.html">link</a>
using a
<a
  href="https://tiplanet.org/forum/viewtopic.php?f=99&t=25091">smartphone-Numworks
  link</a>.
  <li>
  <button
  onclick="UI.numworks_rescue();">Rescue</button> :
  Click here if your N0110 is stuck.<br>
  Connect the calculator, press the 6 key, enter a pin in the RESET
  button
  on the back (keeping 6 pressed), release the 6 key. The screen
  should remain black, while the red led is visible.
  <br>
  If you see <tt>http://... tries to connect</tt>, click on
  <tt>STM32 BOOTLOADER</tt> then click on
  <tt>Connect</tt>.
</ul>
<hr>
<b>If the calculator connection does not work</b>
<ul>
  <li> If the calculator is on and the calc does not display
  "Calculator connected", unplug and plug the calc
  <li>  If the calculator is on and the calc displays
  "Calculator connected", try the Detect button.
  <li> If the calculator is off even after unplug and plug,
  try the Rescue button
</ul>
<hr>
This kit works only with a webusb compatible browser, like Chromium,
Chrome or Edge and from a web server. Firefox does not have support
for webusb for security reasons. If you don't want to run a webusb
compatible browser, you can connect your Numworks with
<a
href="https://www-fourier.univ-grenoble-alpes.fr/~parisse/install_en">Xcas</a>
(Windows, Linux).
<br>
For experts who want to run this page locally,
activate a local webserver, for example by running from a Terminal
the following command
<br><tt>python3 -m http.server</tt><br>
from the directory where you have unzipped 
<a
  href="https://www-fourier.univ-grenoble-alpes.fr/~parisse/giac/xcashtml.zip">xcashtml.zip</a>,
  then click on
<a href="localhost:8000/nws.html">this link</a>.


<hr>
	      Thanks to Maxime Friess for his script
	      <a
                    href="https://github.com/M4xi1m3/numworks.js/blob/master/README.md"
target="_blank">Numworks.js</a> (MIT licence).
This page is also using
<a href="https://github.com/ankitrohatgi/tarballjs">tarballjs</a>,
<a
	      href="https://stuk.github.io/jszip/">JSZip</a> to read
	      zip files and <a
	      href="https://github.com/eligrey/FileSaver.js/blob/master/src/FileSaver.js">FileSaver.js</a>
	      to save files.
<br>Thanks to Elio Poletti for the page style.

<hr>
<address></address>
<!-- hhmts start -->Last modified: Sun Oct 17 17:30:30 CEST 2021 <!-- hhmts end -->
</body> </html>
<script language="javascript">
    if (window.location.href.substr(0, 4) == "http") {
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js');
        }
    }
 window.onload = function (e) {
if (!navigator.usb) alert(UI.langue==-1?'Utilisez un navigateur compatible usb comme Chromium ou Chrome ou Edge':'Requires a webusb browser like Chromium or Chrome or Edge');
}
</script>